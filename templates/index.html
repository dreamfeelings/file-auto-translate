<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡ä»¶ç¿»è¯‘ - å®æ—¶åœ¨çº¿ç¿»è¯‘</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>æ–‡ä»¶ç¿»è¯‘</h1>
            <p class="subtitle">ä¸Šä¼ æ–‡æ¡£ï¼Œå®æ—¶ç¿»è¯‘ï¼Œè½»æ¾å¯¹ç…§</p>
        </header>

        <div class="controls">
            <!-- é€‰é¡¹åŒºåŸŸ -->
            <div class="options-bar">
                <div class="option-group">
                    <div class="option-label">AIæ¨¡å‹</div>
                    <select id="aiModel">
                        {% for model_key, model_info in ai_models.items() %}
                        <option value="{{ model_key }}" {% if model_key == 'gpt-4o' %}selected{% endif %}>
                            {% if model_key == 'gpt-4o' %}ğŸ¤– {{ model_info.name }}
                            {% elif model_key == 'gpt-3.5' %}âš¡ {{ model_info.name }}
                            {% elif model_key == 'kimi' %}ğŸŒ™ {{ model_info.name }}
                            {% elif model_key == 'qwen' %}â˜ï¸ {{ model_info.name }}
                            {% elif model_key == 'zhipu' %}ğŸ§  {{ model_info.name }}
                            {% elif model_key == 'deepseek' %}ğŸ” {{ model_info.name }}
                            {% else %}{{ model_info.name }}
                            {% endif %}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="option-group">
                    <div class="option-label">ç›®æ ‡è¯­è¨€</div>
                    <select id="targetLang">
                        <option value="zh-CN" selected>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰</option>
                        {% for code, name in languages.items() %}
                            {% if code != 'zh-CN' %}
                            <option value="{{ code }}">
                                {% if code == 'zh-TW' %}ğŸ‡¹ğŸ‡¼ {{ name }}
                                {% elif code == 'en' %}ğŸ‡ºğŸ‡¸ {{ name }}
                                {% elif code == 'ja' %}ğŸ‡¯ğŸ‡µ {{ name }}
                                {% elif code == 'ko' %}ğŸ‡°ğŸ‡· {{ name }}
                                {% elif code == 'fr' %}ğŸ‡«ğŸ‡· {{ name }}
                                {% elif code == 'de' %}ğŸ‡©ğŸ‡ª {{ name }}
                                {% elif code == 'es' %}ğŸ‡ªğŸ‡¸ {{ name }}
                                {% elif code == 'ru' %}ğŸ‡·ğŸ‡º {{ name }}
                                {% elif code == 'ar' %}ğŸ‡¸ğŸ‡¦ {{ name }}
                                {% elif code == 'pt' %}ğŸ‡µğŸ‡¹ {{ name }}
                                {% elif code == 'it' %}ğŸ‡®ğŸ‡¹ {{ name }}
                                {% else %}{{ name }}
                                {% endif %}
                            </option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- ä¸Šä¼ åŒºåŸŸ -->
            <div class="upload-section">
                <input type="file" id="fileInput" class="file-input" accept=".pdf,.docx,.doc,.png,.jpg,.jpeg,.gif,.bmp,.webp" multiple>
                <div class="drop-zone" id="dropZone">
                    <div class="drop-zone-icon">ğŸ“</div>
                    <div class="drop-zone-text">æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œæˆ–ç‚¹å‡»é€‰æ‹©</div>
                    <div class="drop-zone-hint">æ”¯æŒ PDFã€Wordã€å›¾ç‰‡æ ¼å¼ï¼ˆå›¾ç‰‡æ”¯æŒå¤šé€‰ï¼‰</div>
                    
                    <!-- æ–‡ä»¶åæ˜¾ç¤ºåœ¨æŒ‰é’®ä¸Šæ–¹ -->
                    <div class="drop-zone-file-name" id="selectedFileName"></div>
                    
                    <!-- å›¾ç‰‡é¢„è§ˆåŒºåŸŸ -->
                    <div class="image-preview-container" id="imagePreviewContainer"></div>
                    
                    <!-- ç¿»è¯‘æŒ‰é’® -->
                    <button class="translate-btn-integrated" id="translateBtn" disabled onclick="event.stopPropagation(); translateContent();">
                        ä¸Šä¼ æ–‡ä»¶å¹¶ç¿»è¯‘
                    </button>
                </div>
                <div class="upload-hint">
                    ç‚¹å‡»ä¸Šæ–¹åŒºåŸŸæˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤
                </div>
            </div>
        </div>

        <div id="statusMessage"></div>

        <div class="content-area">
            <div class="panel">
                <div class="panel-header">åŸæ–‡</div>
                <div id="originalContent">
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“„</div>
                        <p>è¯·ä¸Šä¼ æ–‡ä»¶ä»¥æŸ¥çœ‹å†…å®¹</p>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span>è¯‘æ–‡</span>
                    <div class="export-actions" id="exportActions" style="display: none;">
                        <button class="export-btn" onclick="exportTranslation('txt')">
                            <span>ğŸ“„</span>
                            <span>å¯¼å‡ºè¯‘æ–‡TXT</span>
                        </button>
                        <button class="export-btn" onclick="exportTranslation('docx')">
                            <span>ğŸ“</span>
                            <span>å¯¼å‡ºè¯‘æ–‡Word</span>
                        </button>
                        <button class="export-btn" onclick="exportTranslation('txt', true)">
                            <span>ğŸ“‘</span>
                            <span>å¯¼å‡ºåŒè¯‘TXT</span>
                        </button>
                        <button class="export-btn" onclick="exportTranslation('docx', true)">
                            <span>ğŸ“‹</span>
                            <span>å¯¼å‡ºåŒè¯‘Word</span>
                        </button>
                    </div>
                </div>
                <div id="translatedContent">
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸŒ</div>
                        <p>ç¿»è¯‘ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å›¾ç‰‡æ”¾å¤§é¢„è§ˆæ¨¡æ€æ¡† -->
    <div class="image-modal" id="imageModal" onclick="closeImageModal()">
        <span class="modal-close">&times;</span>
        <img class="modal-content" id="modalImage">
        <div class="modal-caption" id="modalCaption"></div>
    </div>

    <!-- å›¾ç‰‡ç¿»è¯‘æ¨¡å¼é€‰æ‹©æ¨¡æ€æ¡† -->
    <div class="translate-mode-modal" id="translateModeModal">
        <div class="translate-mode-content" onclick="event.stopPropagation()">
            <h3>é€‰æ‹©å›¾ç‰‡ç¿»è¯‘æ¨¡å¼</h3>
            <div class="mode-options">
                <div class="mode-option" onclick="selectTranslateMode('segment')">
                    <div class="mode-icon">ğŸ“</div>
                    <div class="mode-title">åˆ†æ®µè¯†åˆ«ç¿»è¯‘</div>
                    <div class="mode-desc">å…ˆè¯†åˆ«æ–‡å­—ï¼Œå†åˆ†æ®µç¿»è¯‘ï¼ˆæ›´å‡†ç¡®ï¼‰</div>
                </div>
                <div class="mode-option" onclick="selectTranslateMode('whole')">
                    <div class="mode-icon">ğŸ–¼ï¸</div>
                    <div class="mode-title">æ•´å›¾ç¿»è¯‘</div>
                    <div class="mode-desc">ç›´æ¥å‘é€å›¾ç‰‡ç»™AIç¿»è¯‘ï¼ˆä¿ç•™æ’ç‰ˆï¼‰</div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
